(()=>{"use strict";var t=[{name:"ЕЖИНКА КОЛЮЧКА: ПЛЯЖНОЕ НАСТРОЕНИЕ",id:"0001",price:20,year:2019,size:15,category:"hedgehog",color:"red",popular:!1,src:"./src/assets/img/products/hedgehogs/01.jpeg"},{name:"ЕЖИНКА КОЛЮЧКА: ЛЕТНЯЯ ПРОГУЛКА",id:"0002",price:25,year:2018,size:15,category:"hedgehog",color:"blue",popular:!1,src:"./src/assets/img/products/hedgehogs/02.jpeg"},{name:"ЁЖИК КОЛЮНЧИК: ОСЬМИНОЖКА",id:"0003",price:28,year:2018,size:15,category:"hedgehog",color:"yellow",popular:!0,src:"./src/assets/img/products/hedgehogs/03.jpeg"},{name:"ЁЖИК КОЛЮНЧИК: ОМАРЧИК",id:"0004",price:26,year:2019,size:15,category:"hedgehog",color:"blue",popular:!1,src:"./src/assets/img/products/hedgehogs/04.jpeg"},{name:"КОТ ОБОРМОТ: МЕТКИЙ ГЛАЗ",id:"0005",price:32,year:2020,size:25,category:"cat",color:"gray",popular:!1,src:"./src/assets/img/products/cats/01.jpeg"},{name:"КОТ ОБОРМОТ: ХОККЕИСТ",id:"0006",price:36,year:2020,size:25,category:"cat",color:"blue",popular:!1,src:"./src/assets/img/products/cats/02.jpeg"},{name:"КОТ ОБОРМОТ В КЛУБНОЙ КУРТКЕ",id:"0007",price:42,year:2021,size:30,category:"cat",color:"blue",popular:!1,src:"./src/assets/img/products/cats/03.jpeg"},{name:"КОТ ОБОРМОТ: РЫБАК",id:"0008",price:39,year:2020,size:25,category:"cat",color:"blue",popular:!1,src:"./src/assets/img/products/cats/04.jpeg"},{name:"СОВА ЛИЗА: ЕДИНОРОЖКА",id:"0009",price:22,year:2020,size:20,category:"owl",color:"red",popular:!0,src:"./src/assets/img/products/owls/01.jpeg"},{name:"СОВА ЛИЗА: ЯГОДНАЯ ФАНТАЗИЯ",id:"0010",price:27,year:2020,size:20,category:"owl",color:"blue",popular:!1,src:"./src/assets/img/products/owls/02.jpeg"},{name:"СОВА ЛИЗА: ЯСНОЕ УТРО",id:"00011",price:27,year:2020,size:20,category:"owl",color:"green",popular:!1,src:"./src/assets/img/products/owls/03.jpeg"},{name:"СОВА ЛИЗА: ВЕСЁЛЫЙ БАНТ",id:"0012",price:29,year:2021,size:20,category:"owl",color:"blue",popular:!1,src:"./src/assets/img/products/owls/04.jpeg"},{name:"БЕГЕМОТ: ПИЛЮЛЬКИН",id:"0013",price:41,year:2020,size:30,category:"hyppo",color:"blue",popular:!1,src:"./src/assets/img/products/hyppos/01.jpeg"},{name:"БЕГЕМОТ: ЗЕФИРКА",id:"0014",price:47,year:2022,size:30,category:"hyppo",color:"red",popular:!0,src:"./src/assets/img/products/hyppos/02.jpeg"},{name:"БЕГЕМОТ: ДИНОЗАВРИК",id:"0015",price:43,year:2021,size:30,category:"hyppo",color:"yellow",popular:!1,src:"./src/assets/img/products/hyppos/03.jpeg"},{name:"БЕГЕМОТ: ПУТЕШЕСТВИЕ",id:"0016",price:43,year:2021,size:30,category:"hyppo",color:"green",popular:!1,src:"./src/assets/img/products/hyppos/04.jpeg"},{name:"КОШЕЧКА КРИСТИ",id:"0017",price:41,year:2022,size:30,category:"cotti",color:"yellow",popular:!0,src:"./src/assets/img/products/cotti/01.jpeg"},{name:"ЕДИНОРОГ ДАФНИ",id:"0018",price:42,year:2022,size:30,category:"cotti",color:"gray",popular:!0,src:"./src/assets/img/products/cotti/02.jpeg"},{name:"ЗАЙКА ЛЮСИ",id:"0019",price:49,year:2022,size:30,category:"cotti",color:"red",popular:!0,src:"./src/assets/img/products/cotti/03.jpeg"},{name:"ОВЕЧКА ЗОИ",id:"0020",price:42,year:2022,size:30,category:"cotti",color:"yellow",popular:!1,src:"./src/assets/img/products/cotti/04.jpeg"},{name:"ЁЖИК ГЕНРИ",id:"0021",price:40,year:2022,size:30,category:"cotti",color:"yellow",popular:!1,src:"./src/assets/img/products/cotti/05.jpeg"},{name:"ЛЯГУШЕНОК ФИОНА",id:"0022",price:46,year:2022,size:30,category:"cotti",color:"red",popular:!0,src:"./src/assets/img/products/cotti/06.jpeg"},{name:"ПАНДА БУ: ПЛАМЕННОЕ СЕРДЦЕ",id:"0023",price:32,year:2022,size:20,category:"panda",color:"red",popular:!0,src:"./src/assets/img/products/panda/01.jpeg"},{name:"ПАНДА БУ",id:"0024",price:30,year:2021,size:20,category:"panda",color:"gray",popular:!1,src:"./src/assets/img/products/panda/02.jpeg"},{name:"ПАНДА БУ: ОТ ВСЕГО СЕРДЦА",id:"0025",price:28,year:2021,size:20,category:"panda",color:"red",popular:!1,src:"./src/assets/img/products/panda/03.jpeg"}],e=function(){function t(t,e,r){this.productList=t,this.addToCartCb=e,this.getCartCb=r,this.cartData=[]}return t.prototype.drawProducts=function(t){var e=this;this.cartData=this.getCartCb();var r=document.querySelector(".products");r.classList.remove("not-found"),r.innerHTML="",0==t.length&&(r.innerHTML="Извините, подходящих продуктов не найдено =(",r.classList.add("not-found"));var o=new DocumentFragment;t.forEach((function(t){var r=document.createElement("div");r.classList.add("products_item"),e.cartData.includes(t.id)&&r.classList.add("in-cart"),r.id=t.id;var c=document.createElement("img");c.classList.add("products_item-img"),c.src=t.src,r.addEventListener("click",(function(){r.classList.toggle("in-cart"),e.addToCartCb(t)}));var a=document.createElement("p");a.classList.add("products_item-name"),a.textContent=t.name;var i=document.createElement("p");i.classList.add("products_item-price"),i.textContent="Стоимость: ".concat(t.price," USD");var s=document.createElement("p");s.classList.add("products_item-size"),s.textContent="Размер: ".concat(t.size," см");var n=document.createElement("p");n.classList.add("products_item-year"),n.textContent="Год выпуска: ".concat(t.year),r.append(c,a,i,s,n),o.appendChild(r)})),r.append(o)},t}();const r=e;var o=function(){function t(){this.cartMaximum=20,this.cartData=localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[],document.querySelector(".cart_counter").textContent=this.cartData.length>0?this.cartData.length.toString():""}return t.prototype.addProductToCart=function(t){if(!(this.cartData.length>=this.cartMaximum))return this.cartData.includes(t.id)?this.cartData.splice(this.cartData.indexOf(t.id),1):this.cartData.push(t.id),console.log(this.cartData),document.querySelector(".cart_counter").textContent=this.cartData.length>0?this.cartData.length.toString():"",localStorage.setItem("cart",JSON.stringify(this.cartData)),this.cartData;alert("Извините, количество товаров в корзине не может превышать 20 ед.")},t.prototype.getCartData=function(){return this.cartData},t}();const c=o;var a=function(t,e,r){if(r||2===arguments.length)for(var o,c=0,a=e.length;c<a;c++)!o&&c in e||(o||(o=Array.prototype.slice.call(e,0,c)),o[c]=e[c]);return t.concat(o||Array.prototype.slice.call(e))},i=function(){function t(t,e){this.productList=t,this.productListFiltered=[],this.drawProductsCb=e,this.filtersAll={price:[0,50],year:[2018,2022],size:[],category:[],color:[]},this.sortOrder="name dec"}return t.prototype.init=function(){var t=this;this.localStorageHandler(),this.slidersHandler(),this.filterSizeButtonHandler(),this.filterCategoryButtonHandler(),this.filterColorButtonHandler(),this.setInterface(),document.querySelector("#sort").addEventListener("change",(function(e){t.sortOrder=e.target.value,t.sortEventHandler(t.sortOrder),t.drawProductsCb(t.productListFiltered)})),document.querySelector(".reset-filters").addEventListener("click",(function(){t.filtersReset()})),document.querySelector(".clear-local-storage").addEventListener("click",(function(){localStorage.clear(),t.filtersReset()})),document.querySelector(".search").addEventListener("search",(function(e){t.searchProducts(e)})),document.querySelector(".search").addEventListener("input",(function(e){0==e.target.value.length&&t.searchProducts(e)})),window.addEventListener("unload",(function(){localStorage.setItem("filters",JSON.stringify(t.filtersAll)),localStorage.setItem("sortOrder",JSON.stringify(t.sortOrder))}))},t.prototype.localStorageHandler=function(){this.filtersAll=localStorage.getItem("filters")?JSON.parse(localStorage.getItem("filters")):this.filtersAll,this.sortOrder=localStorage.getItem("sortOrder")?JSON.parse(localStorage.getItem("sortOrder")):this.filtersAll},t.prototype.setInterface=function(){var t=this,e=document.querySelectorAll('.range-filters input[type="range"]'),r=document.querySelectorAll(".price-numbers > input"),o=document.querySelectorAll(".year-numbers > input");e[0].value=r[0].value=this.filtersAll.price[0].toString(),e[1].value=r[1].value=this.filtersAll.price[1].toString(),e[2].value=o[0].value=this.filtersAll.year[0].toString(),e[3].value=o[1].value=this.filtersAll.year[1].toString(),e.forEach((function(t){t.dispatchEvent(new Event("input"))}));var c=document.querySelectorAll(".type-filters button"),i=a(a(a([],this.filtersAll.category,!0),this.filtersAll.size,!0),this.filtersAll.color,!0);c.forEach((function(t){i.includes(t.id)?t.classList.add("active"):t.classList.contains("active")&&t.classList.remove("active")}));var s=document.querySelector("#sort");Array.from(s.options).forEach((function(e){t.sortOrder.length?e.value==t.sortOrder&&(e.selected=!0):e.selected})),this.filterSortProducts(this.filtersAll)},t.prototype.filtersReset=function(){this.filtersAll.price=[0,50],this.filtersAll.year=[2018,2022],this.filtersAll.category=[],this.filtersAll.color=[],this.filtersAll.size=[],this.sortOrder="name inc",this.setInterface()},t.prototype.filterProductsRange=function(t,e,r){return t.filter((function(t){return t[e]>=r[0]&&t[e]<=r[1]}))},t.prototype.slidersHandler=function(){var t=this,e=document.querySelectorAll('input[type="range"]'),r=document.querySelectorAll(".price-numbers > input"),o=document.querySelector('.price-sliders input[type="range"]:last-child'),c=document.querySelectorAll(".year-numbers > input"),a=document.querySelector('.year-sliders input[type="range"]:last-child'),i=getComputedStyle(document.body).getPropertyValue("--color-three"),s=getComputedStyle(document.body).getPropertyValue("--color-four");e[0].addEventListener("input",(function(){+e[0].value>+e[1].value&&(e[1].value=e[0].value),r[0].value=e[0].value.toString(),r[1].value=e[1].value.toString()})),e[1].addEventListener("input",(function(){+e[1].value<+e[0].value&&(e[0].value=e[1].value),r[0].value=e[0].value.toString(),r[1].value=e[1].value.toString()})),e[2].addEventListener("input",(function(){+e[2].value>+e[3].value&&(e[3].value=e[2].value),c[0].value=e[2].value.toString(),c[1].value=e[3].value.toString()})),e[3].addEventListener("input",(function(){+e[3].value<+e[2].value&&(e[2].value=e[3].value),c[0].value=e[2].value.toString(),c[1].value=e[3].value.toString()})),[e[0],e[1]].forEach((function(r){r.addEventListener("change",(function(){t.filtersAll.price[0]=Number(e[0].value),t.filtersAll.price[1]=Number(e[1].value),t.filterSortProducts(t.filtersAll)}))})),[e[2],e[3]].forEach((function(r){r.addEventListener("change",(function(){t.filtersAll.year[0]=Number(e[2].value),t.filtersAll.year[1]=Number(e[3].value),t.filterSortProducts(t.filtersAll)}))})),[e[0],e[1]].forEach((function(t){t.addEventListener("input",(function(){var t=Math.floor(Number(e[0].value)/+e[1].max*100),r=Math.floor(Number(e[1].value)/+e[0].max*100);o.style.background="linear-gradient(to right, ".concat(i," 0%, ").concat(i," ").concat(t,"%, ").concat(s," ").concat(t,"%, ").concat(s," ").concat(r,"%, ").concat(s," ").concat(r,"%, ").concat(s," ").concat(r,"%, ").concat(i," ").concat(r,"%, ").concat(i," 100%)")}))})),[e[2],e[3]].forEach((function(t){t.addEventListener("input",(function(){var t=Math.floor(Math.abs(+e[2].min-+e[2].value)/4*100),r=Math.floor(Math.abs(+e[3].min-+e[3].value)/4*100);a.style.background="linear-gradient(to right, ".concat(i," 0%, ").concat(i," ").concat(t,"%, ").concat(s," ").concat(t,"%, ").concat(s," ").concat(r,"%, ").concat(s," ").concat(r,"%, ").concat(s," ").concat(r,"%, ").concat(i," ").concat(r,"%, ").concat(i," 100%)")}))}))},t.prototype.filterProductsProp=function(t,e,r){return 0==e.length?t:t.filter((function(t){return e.includes(t[r].toString())}))},t.prototype.filterSortProducts=function(t){for(var e in this.productListFiltered=a([],this.productList,!0),t)this.productListFiltered="price"==e||"year"==e?this.filterProductsRange(this.productListFiltered,e,t[e]):this.filterProductsProp(this.productListFiltered,t[e],e);this.sortEventHandler(this.sortOrder),this.drawProductsCb(this.productListFiltered)},t.prototype.filterSizeButtonHandler=function(){var t=this;document.querySelectorAll(".size-buttons_button").forEach((function(e){e.addEventListener("click",(function(){e.classList.toggle("active"),e.id&&t.manageFilter(t.filtersAll.size,e.id)}))}))},t.prototype.filterCategoryButtonHandler=function(){var t=this;document.querySelectorAll(".category-buttons_button").forEach((function(e){e.addEventListener("click",(function(){e.classList.toggle("active"),e.id&&t.manageFilter(t.filtersAll.category,e.id)}))}))},t.prototype.filterColorButtonHandler=function(){var t=this;document.querySelectorAll(".color-buttons_button").forEach((function(e){e.addEventListener("click",(function(){e.classList.toggle("active"),e.id&&t.manageFilter(t.filtersAll.color,e.id)}))}))},t.prototype.manageFilter=function(t,e){t.includes(e)?t.splice(t.indexOf(e),1):t.push(e.toString()),this.filterSortProducts(this.filtersAll)},t.prototype.sortProducts=function(t,e){var r=a([],t,!0);this.productListFiltered=r.sort(e)},t.prototype.sortEventHandler=function(t){switch(t){case"name inc":this.sortProducts(this.productListFiltered,(function(t,e){return t.name<e.name?-1:1}));break;case"name dec":this.sortProducts(this.productListFiltered,(function(t,e){return t.name>e.name?-1:1}));break;case"price inc":this.sortProducts(this.productListFiltered,(function(t,e){return t.price<e.price?-1:1}));break;case"price dec":this.sortProducts(this.productListFiltered,(function(t,e){return t.price>e.price?-1:1}))}},t.prototype.searchProducts=function(t){var e=this.productListFiltered.filter((function(e){return e.name.toLocaleLowerCase().includes(t.target.value.toLocaleLowerCase())}));this.drawProductsCb(e)},t}();const s=i;var n=new c,l=new r(t,(function(t){return n.addProductToCart(t)}),(function(){return n.getCartData()}));new s(t,(function(t){return l.drawProducts(t)})).init()})();